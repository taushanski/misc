package arrays_and_strings_1;

public class StringCompression {
    public static void main(String[] args) {
        String textToCompress = "aaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfgaaaaaBbbbbbCccccciidfg";
        String compressedText = compressString(textToCompress);
        System.out.printf("The text before compression is: [%s] and after that is [%s]", textToCompress,
                compressedText);
    }

    private static String compressString(String textToCompress) {
        int compressedLength = countCompressed(textToCompress);
        if (compressedLength >= textToCompress.length()) {
            return textToCompress;
        }
        StringBuilder sb = new StringBuilder(compressedLength);
        long startTime = System.currentTimeMillis();
        String result = "";
        int countConsecutive = 0;
        for (int i = 0; i < textToCompress.length(); i++) {
            countConsecutive++;
            char nextChar = textToCompress.charAt(i);
            if (i + 1 >= textToCompress.length() || nextChar != textToCompress.charAt(i + 1)) {
                sb.append(nextChar).append(countConsecutive);
                countConsecutive = 0;
            }

        }

        System.out.printf("The execution time is: %d%n", System.currentTimeMillis() - startTime);
        return result.length() >= textToCompress.length() ? textToCompress : sb.toString();
    }

    private static int countCompressed(String textToCompress) {
        int compressedLength = 0;
        for (int i = 0; i < textToCompress.length(); i++) {

            char nextChar = textToCompress.charAt(i);
            if (i + 1 >= textToCompress.length() || nextChar != textToCompress.charAt(i + 1)) {
                compressedLength += 2;
            }

        }
        return compressedLength;
    }

}
